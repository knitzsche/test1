<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<meta charset=utf-8 />

<title>Colors</title>

</head>
<script>


$( document ).ready(function() {
  console.log( "document loaded" );
  start();
});

function start() {
  var d = document.getElementById('webusb');
  var h = "<p>yoyo!<\p>"; 
  d.innerHTML = h;
}

function doit(){

  //console.log( "doiit clicked");
  let button = document.getElementById('but');

  but.addEventListener('click', async () => {
    var device;
    try {
      console.log("in try");
      device = await navigator.usb.requestDevice({ filters: [{
          vendorId: 1133
          //vendorId: 0x046d
          //classCode: 0x01, // vendor-specific
          //protocolCode: 0x01
      }] })
      .then(device => {
        console.log("device found!");
        console.log("product name", device.productName);
        console.log("product manufacturer", device.manufacturerName);
      }).catch(error => { console.log(error); });
      if (device !== undefined) {
        var devices;
        devices = navigator.usb.getDevices();
        console.log("length devices", devices.length);
        //devices.forEach(device => {
        //console.log("a usb device");
        console.log("device");
      }
    } catch{
      console.log("in icatch. no device found");
    }
 });

}


</script>
<body>

<button id="but" onclick="doit()">Do It</button>

 
<div id="webusb"/>

</body>
</html>

